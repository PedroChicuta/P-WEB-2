<%- include('../partials/header') %>
    <h2>Gerenciar Cursos</h2>
    
    <% if (locals.mensagem) { %>
        <div style="background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 10px; margin-bottom: 20px; border-radius: 4px;">
            ✅ <%= mensagem %>
        </div>
    <% } %>

    <div style="margin-bottom: 20px;">
        <a href="/cursos/novo" class="btn btn-primary">Novo Curso</a>
    </div>

    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #333; color: white;">
                <th style="padding: 10px;">Nome</th>
                <th style="padding: 10px;">Carga Horária</th>
                <th style="padding: 10px;">Status</th>
                <th style="padding: 10px;">Ações</th>
            </tr>
        </thead>
        <tbody>
            <% if (!cursos || cursos.length === 0) { %>
                <tr><td colspan="4" style="padding: 20px; text-align: center;">Nenhum curso cadastrado.</td></tr>
            <% } else { %>
                <% cursos.forEach(curso => { %>
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;"><%= curso.nome %></td>
                        <td style="padding: 10px;"><%= curso.cargaHoraria %></td>
                        <td style="padding: 10px;">
                            <% if(curso.ativo) { %>
                                <span class="status-ativa">Ativo</span>
                            <% } else { %>
                                <span class="status-trancada">Inativo</span>
                            <% } %>
                        </td>
                        <td style="padding: 10px;">
                            <a href="/cursos/editar/<%= curso.id %>" class="btn btn-primary">Editar</a>
                            
                            <form action="/cursos/toggle/<%= curso.id %>" method="POST" style="display:inline;">
                                <button type="submit" class="btn <%= curso.ativo ? 'btn-danger' : 'btn-success' %>">
                                    <%= curso.ativo ? 'Desativar' : 'Ativar' %>
                                </button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            <% } %>
        </tbody>
    </table>
<%- include('../partials/footer') %>